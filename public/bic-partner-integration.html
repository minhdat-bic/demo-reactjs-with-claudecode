<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beincom Partner Integration Guide</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8fafc;
        }
        .container {
            background: white;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1, h2, h3 {
            color: #2d3748;
        }
        h1 {
            border-bottom: 3px solid #4299e1;
            padding-bottom: 15px;
            margin-bottom: 30px;
            text-align: center;
        }
        h2 {
            margin-top: 40px;
            margin-bottom: 20px;
            color: #2b6cb0;
            border-left: 4px solid #4299e1;
            padding-left: 15px;
        }
        .hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 12px;
            margin-bottom: 30px;
            text-align: center;
        }
        .hero h1 {
            border: none;
            margin-bottom: 15px;
            font-size: 2.5em;
        }
        .hero p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        .step {
            background: #f7fafc;
            border-left: 4px solid #4299e1;
            padding: 25px;
            margin: 25px 0;
            border-radius: 0 8px 8px 0;
            position: relative;
        }
        .step-number {
            position: absolute;
            top: -10px;
            left: -15px;
            background: #4299e1;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }
        .step h3 {
            margin-top: 0;
            color: #2b6cb0;
        }
        .code-block {
            white-space: pre;
            background: #1a202c;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 13px;
            line-height: 1.6;
            position: relative;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .code-block pre {
            margin: 0;
            white-space: pre;
            word-wrap: normal;
        }
        .code-block .code-comment {
            color: #68d391;
            font-style: italic;
        }
        .code-block .code-string {
            color: #f6ad55;
        }
        .code-block .code-keyword {
            color: #63b3ed;
            font-weight: 500;
        }
        .code-block .code-function {
            color: #b794f4;
        }
        .code-block .code-property {
            color: #f687b3;
        }
        .code-block .code-number {
            color: #fbd38d;
        }
        .code-header {
            background: #2d3748;
            color: #cbd5e0;
            padding: 8px 15px;
            border-radius: 8px 8px 0 0;
            font-size: 12px;
            font-weight: 600;
            margin: 15px 0 0 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .code-header + .code-block {
            border-radius: 0 0 8px 8px;
            margin-top: 0;
        }
        .code-lang-badge {
            background: #4299e1;
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
        }
        .endpoint {
            background: #e6fffa;
            border: 1px solid #81e6d9;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        .endpoint-method {
            display: inline-block;
            background: #319795;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            margin-right: 10px;
            font-size: 12px;
        }
        .warning {
            background: #fef5e7;
            border-left: 4px solid #ed8936;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        .info {
            background: #ebf8ff;
            border-left: 4px solid #4299e1;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        .success {
            background: #f0fff4;
            border-left: 4px solid #48bb78;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #e2e8f0;
            padding: 12px;
            text-align: left;
        }
        th {
            background: #f7fafc;
            font-weight: 600;
        }
        .nav {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 0;
            border-radius: 12px;
            margin-bottom: 30px;
            position: sticky;
            top: 20px;
            z-index: 100;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
            overflow: hidden;
        }
        .nav-container {
            padding: 16px 20px;
            overflow-x: auto;
            overflow-y: hidden;
            scrollbar-width: thin;
            scrollbar-color: rgba(255, 255, 255, 0.3) transparent;
            scroll-behavior: smooth;
        }
        .nav-container::-webkit-scrollbar {
            height: 4px;
        }
        .nav-container::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
        }
        .nav-container::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
        }
        .nav-container::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
        }
        .nav ul {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
            gap: 8px;
            min-width: max-content;
            width: max-content;
        }
        .nav li {
            flex-shrink: 0;
        }
        .nav a {
            color: rgba(255, 255, 255, 0.9);
            text-decoration: none;
            padding: 10px 16px;
            border-radius: 8px;
            transition: all 0.3s ease;
            display: block;
            font-size: 14px;
            font-weight: 500;
            white-space: nowrap;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
        }
        .nav a:hover {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border-color: rgba(255, 255, 255, 0.4);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        .nav a:active {
            transform: translateY(0);
        }
        .benefits {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .benefit-card {
            background: white;
            border: 1px solid #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .benefit-card h4 {
            color: #2b6cb0;
            margin-top: 0;
        }
        .integration-flow {
            background: #f7fafc;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .flow-diagram {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .flow-step {
            background: white;
            border: 2px solid #4299e1;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            min-width: 150px;
            margin: 10px;
        }
        .flow-arrow {
            font-size: 24px;
            color: #4299e1;
            margin: 0 10px;
        }
        .checklist {
            background: #f0fff4;
            border: 1px solid #9ae6b4;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .checklist h4 {
            color: #2f855a;
            margin-top: 0;
        }
        .checklist ul {
            list-style: none;
            padding: 0;
        }
        .checklist li {
            padding: 5px 0;
            position: relative;
            padding-left: 25px;
        }
        .checklist li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #48bb78;
            font-weight: bold;
        }
        .troubleshooting {
            background: #fffaf0;
            border: 1px solid #fbd38d;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .troubleshooting h4 {
            color: #c05621;
            margin-top: 0;
        }
        .contact-info {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            margin: 40px 0;
        }
        .contact-info h3 {
            color: white;
            margin-top: 0;
        }
        @media (max-width: 768px) {
            .flow-diagram {
                flex-direction: column;
            }
            .flow-arrow {
                transform: rotate(90deg);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="hero">
            <h1>🚀 Partner with Beincom</h1>
            <p>Drive user growth and track success with our seamless integration platform</p>
        </div>

        <nav class="nav">
            <div class="nav-container">
                <ul>
                    <li><a href="#overview">Overview</a></li>
                    <li><a href="#getting-started">Getting Started</a></li>
                    <li><a href="#integration-flow">Integration Flow</a></li>
                    <li><a href="#user-referrals">User Referrals</a></li>
                    <li><a href="#tracking-events">Tracking Events</a></li>
                    <li><a href="#webhooks">Webhooks</a></li>
                    <li><a href="#api-access">API Access</a></li>
                    <li><a href="#testing">Testing</a></li>
                    <li><a href="#examples">Examples</a></li>
                    <li><a href="#support">Support</a></li>
                </ul>
            </div>
        </nav>

        <section id="overview">
            <h2>📋 Partnership Overview</h2>

            <p>Welcome to the Beincom Partner Program! Our integration platform allows you to refer users to Beincom and track their journey through our ecosystem. You'll receive real-time notifications about user activities and can access detailed analytics through our API.</p>

            <div class="benefits">
                <div class="benefit-card">
                    <h4>🎯 User Tracking</h4>
                    <p>Track users from referral to key milestones like registration, phone verification, and wallet activation.</p>
                </div>
                <div class="benefit-card">
                    <h4>🔔 Real-time Notifications</h4>
                    <p>Receive instant webhook notifications when users complete important actions in the Beincom ecosystem.</p>
                </div>
                <div class="benefit-card">
                    <h4>📊 Analytics & Reporting</h4>
                    <p>Access comprehensive data about your referred users through our REST API with flexible filtering options.</p>
                </div>
                <div class="benefit-card">
                    <h4>🔒 Secure Integration</h4>
                    <p>Enterprise-grade security with API key authentication and rate limiting.</p>
                </div>
            </div>

            <div class="integration-flow">
                <h3>🔄 How It Works</h3>
                <div class="flow-diagram">
                    <div class="flow-step">
                        <strong>1. Setup</strong><br>
                        Partner registration<br>
                        & API credentials
                    </div>
                    <div class="flow-arrow">→</div>
                    <div class="flow-step">
                        <strong>2. Refer</strong><br>
                        Direct users to<br>
                        Beincom signup
                    </div>
                    <div class="flow-arrow">→</div>
                    <div class="flow-step">
                        <strong>3. Track</strong><br>
                        Receive notifications<br>
                        & query events
                    </div>
                    <div class="flow-arrow">→</div>
                    <div class="flow-step">
                        <strong>4. Analyze</strong><br>
                        Monitor user<br>
                        engagement
                    </div>
                </div>
            </div>
        </section>

        <section id="getting-started">
            <h2>🏁 Getting Started</h2>

            <div class="step">
                <div class="step-number">1</div>
                <h3>Partnership Agreement</h3>
                <p>Contact our partnership team to discuss collaboration terms and sign the partnership agreement. This ensures both parties understand the integration scope, revenue sharing, and compliance requirements.</p>
                <div class="info">
                    <strong>Contact:</strong> partnerships@beincom.com<br>
                    <strong>Timeline:</strong> Typically 1-2 weeks for agreement finalization
                </div>
            </div>

            <div class="step">
                <div class="step-number">2</div>
                <h3>Partner Account Setup</h3>
                <p>Once the agreement is signed, our team will create your partner account with the following configuration:</p>
                <ul>
                    <li><strong>clientId:</strong> Your unique partner identifier (e.g., "acme-corp-2024")</li>
                    <li><strong>clientName:</strong> Your organization name for internal reference</li>
                    <li><strong>API Credentials:</strong> Secure API keys for authentication</li>
                    <li><strong>Webhook Configuration:</strong> Your endpoint URL and preferred notification method</li>
                    <li><strong>Event Subscriptions:</strong> Choose which user events you want to track</li>
                </ul>
            </div>

            <div class="step">
                <div class="step-number">3</div>
                <h3>Technical Integration</h3>
                <p>Implement the referral tracking and event handling in your application. This typically involves:</p>
                <ul>
                    <li>Updating your signup/onboarding flow to redirect to Beincom</li>
                    <li>Setting up webhook endpoints to receive user event notifications</li>
                    <li>Implementing API calls to query user data and events</li>
                    <li>Adding analytics and reporting to your dashboard</li>
                </ul>
            </div>

            <div class="step">
                <div class="step-number">4</div>
                <h3>Testing & Go Live</h3>
                <p>Thorough testing ensures a smooth user experience and accurate tracking:</p>
                <ul>
                    <li>Test user referral flows with sandbox users</li>
                    <li>Verify webhook delivery and payload processing</li>
                    <li>Validate API queries and data accuracy</li>
                    <li>Conduct load testing for expected user volumes</li>
                </ul>
            </div>

            <div class="checklist">
                <h4>✅ Pre-Integration Checklist</h4>
                <ul>
                    <li>Partnership agreement signed and executed</li>
                    <li>Technical requirements reviewed and approved</li>
                    <li>Development environment prepared</li>
                    <li>Webhook endpoint infrastructure ready</li>
                    <li>API integration plan documented</li>
                    <li>Testing strategy defined</li>
                </ul>
            </div>
        </section>

        <section id="integration-flow">
            <h2>🔄 Integration Flow</h2>

            <p>Understanding the complete integration flow helps you build a robust and reliable system. Here's the detailed technical process:</p>

            <div class="step">
                <div class="step-number">1</div>
                <h3>User Referral Process</h3>
                <p>When a user on your platform wants to join Beincom, you redirect them to our signup page with tracking parameters:</p>

                <div class="code-block">
// Basic referral URL structure
const referralUrl = `https://group.beincom.com/ref/Cb8pun?type=personal&clientId=${YOUR_CLIENT_ID}&identityId=${userIdFromYourSystem}&extra=${encodeURIComponent(JSON.stringify(additionalData))}`;

// Example with real data
const referralUrl = `https://group.beincom.com/ref/Cb8pun?type=personal&clientId=acme-corp-2024&identityId=user-12345&extra=${encodeURIComponent(JSON.stringify({
  source: 'mobile_app',
  campaign: 'Q4_growth',
  userTier: 'premium'
}))}`;

// Redirect user
window.location.href = referralUrl;
                </div>

                <div class="info">
                    <strong>Key Parameters:</strong><br>
                    • <code>clientId</code>: Your unique partner identifier (required)<br>
                    • <code>identityId</code>: Your internal user ID for tracking (optional but recommended)<br>
                    • <code>extra</code>: Additional context data as JSON string (optional)
                </div>
            </div>

            <div class="step">
                <div class="step-number">2</div>
                <h3>User Signup & Onboarding</h3>
                <p>The user completes Beincom's signup and onboarding process. During this journey, several trackable events occur:</p>

                <ul>
                    <li><strong>user.registered</strong> - User completes initial registration</li>
                    <li><strong>wallet.activated</strong> - User activates their Beincom wallet</li>
                    <li><strong>kyc.completed</strong> - User completes Know Your Customer verification</li>
                </ul>

                <div class="success">
                    <strong>Automatic Tracking:</strong> Once the user clicks your referral link, all subsequent events are automatically attributed to your partnership. No additional implementation required!
                </div>
            </div>

            <div class="step">
                <div class="step-number">3</div>
                <h3>Event Notifications</h3>
                <p>As users progress through Beincom's ecosystem, you'll receive notifications via your chosen integration methods:</p>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                    <div class="endpoint">
                        <h4>🔔 Webhook Method (Recommended)</h4>
                        <p>Real-time HTTP POST notifications to your endpoint</p>
                        <ul>
                            <li>Immediate delivery</li>
                            <li>Automatic retry on failure</li>
                            <li>API key authentication for security</li>
                        </ul>
                    </div>
                    <div class="endpoint">
                        <h4>📡 API Polling Method</h4>
                        <p>Query our API for user events on your schedule</p>
                        <ul>
                            <li>Pull-based integration</li>
                            <li>Flexible querying</li>
                            <li>Historical data access</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="step">
                <div class="step-number">4</div>
                <h3>Data Processing & Analytics</h3>
                <p>Process the received events to update your systems and generate insights:</p>

                <div class="code-block">
// Example event processing workflow
function processUserEvent(event) {
  // Update user status in your database
  await updateUserProgress(event.identityId, event.eventType);

  // Trigger business logic based on event type
  switch (event.eventType) {
    case 'user.registered':
      await sendWelcomeEmail(event.identityId);
      await updateConversionMetrics('registration');
      break;

    case 'wallet.activated':
      await unlockPremiumFeatures(event.identityId);
      await updateConversionMetrics('wallet_activation');
      break;
  }

  // Update analytics dashboard
  await refreshAnalyticsDashboard();
}
                </div>
            </div>
        </section>

        <section id="user-referrals">
            <h2>👥 User Referral Implementation</h2>

            <p>The referral system is the foundation of your Beincom integration. Here's how to implement it effectively:</p>

            <h3>📝 Referral URL Structure</h3>
            <div class="code-block">
https://group.beincom.com/ref/Cb8pun?type=personal&clientId={your-client-id}&identityId={optional-identity-id}&extra={optional-extra}
            </div>

            <h3>📊 Parameter Details</h3>
            <table>
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Required</th>
                        <th>Description</th>
                        <th>Example</th>
                        <th>Best Practices</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>clientId</code></td>
                        <td>✅ Yes</td>
                        <td>Your unique partner identifier</td>
                        <td>acme-corp-2024</td>
                        <td>Always include for proper attribution</td>
                    </tr>
                    <tr>
                        <td><code>identityId</code></td>
                        <td>❌ No</td>
                        <td>Your internal user identifier</td>
                        <td>user-12345</td>
                        <td>Include for easier event tracking</td>
                    </tr>
                    <tr>
                        <td><code>extra</code></td>
                        <td>❌ No</td>
                        <td>Additional context data (JSON string)</td>
                        <td>{"campaign":"summer2024"}</td>
                        <td>Include campaign/source tracking</td>
                    </tr>
                </tbody>
            </table>

            <h3>💡 Implementation Examples</h3>

            <div class="step">
                <h4>Web Application (JavaScript)</h4>
                <div class="code-block">
// Function to generate referral URL
function generateBeincomReferralUrl(userId, campaignData = {}) {
  const baseUrl = 'https://group.beincom.com/ref/Cb8pun?type=personal';
  const params = new URLSearchParams({
    clientId: 'your-client-id',
    identityId: userId,
    extra: JSON.stringify({
      timestamp: Date.now(),
      source: 'web_app',
      ...campaignData
    })
  });

  return `${baseUrl}&${params.toString()}`;
}

// Usage in your signup flow
document.getElementById('joinBeincomBtn').addEventListener('click', function() {
  const userId = getCurrentUserId();
  const campaignData = {
    campaign: 'holiday_promotion',
    referralSource: 'dashboard_banner'
  };

  const referralUrl = generateBeincomReferralUrl(userId, campaignData);

  // Open in new tab or same window
  window.open(referralUrl, '_blank');

  // Track the referral event in your analytics
  analytics.track('beincom_referral_initiated', {
    userId: userId,
    campaign: campaignData.campaign
  });
});
                </div>
            </div>

            <div class="step">
                <h4>Mobile Application (React Native)</h4>
                <div class="code-block">
import { Linking } from 'react-native';

const BeincomIntegration = {
  async referUser(userId, extraData = {}) {
    const referralUrl = `https://group.beincom.com/ref/Cb8pun?type=personal&clientId=your-client-id&identityId=${userId}&extra=${encodeURIComponent(JSON.stringify({
      platform: 'mobile',
      app_version: '1.2.3',
      ...extraData
    }))}`;

    try {
      const supported = await Linking.canOpenURL(referralUrl);
      if (supported) {
        await Linking.openURL(referralUrl);

        // Track successful referral
        analytics.track('beincom_referral_opened', { userId });
      } else {
        console.error('Cannot open Beincom signup URL');
      }
    } catch (error) {
      console.error('Error opening Beincom signup:', error);
    }
  }
};

// Usage in component
const handleJoinBeincom = () => {
  BeincomIntegration.referUser(user.id, {
    campaign: 'mobile_onboarding',
    user_tier: user.tier
  });
};
                </div>
            </div>

            <div class="step">
                <h4>Server-Side Integration (Node.js)</h4>
                <div class="code-block">
// For email campaigns or server-generated links
function generateBeincomReferralLink(userId, campaignData) {
  const baseUrl = 'https://group.beincom.com/ref/Cb8pun?type=personal';
  const extraData = {
    generated_at: new Date().toISOString(),
    campaign_id: campaignData.campaignId,
    user_segment: campaignData.userSegment,
    ...campaignData.custom
  };

  const params = new URLSearchParams({
    clientId: process.env.BEINCOM_CLIENT_ID,
    identityId: userId,
    extra: JSON.stringify(extraData)
  });

  return `${baseUrl}&${params.toString()}`;
}

// Email campaign integration
async function sendBeincomInviteEmail(userEmail, userId) {
  const referralLink = generateBeincomReferralLink(userId, {
    campaignId: 'email_invite_2024',
    userSegment: 'active_users',
    custom: { source: 'email_campaign' }
  });

  await emailService.send({
    to: userEmail,
    template: 'beincom_invite',
    data: {
      referralLink: referralLink,
      userName: await getUserName(userId)
    }
  });

  // Log referral link generation
  await logReferralGenerated(userId, referralLink);
}
                </div>
            </div>

            <div class="warning">
                <strong>⚠️ Important Notes:</strong>
                <ul>
                    <li>Always URL-encode the <code>extra</code> parameter when it contains JSON</li>
                    <li>Keep <code>identityId</code> values consistent across your system for accurate tracking</li>
                    <li>Test referral links in different environments (mobile browsers, apps, etc.)</li>
                    <li>Monitor referral success rates and user drop-off points</li>
                </ul>
            </div>
        </section>

        <section id="tracking-events">
            <h2>📈 Tracking User Events</h2>

            <p>Once users are referred to Beincom, you can track their progress through various milestones. Here's how to effectively monitor and respond to user events:</p>

            <h3>🎯 Available Event Types</h3>
            <table>
                <thead>
                    <tr>
                        <th>Event Type</th>
                        <th>Description</th>
                        <th>Timing</th>
                        <th>Business Value</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>user.registered</code></td>
                        <td>User completes initial signup</td>
                        <td>~2-5 minutes after referral</td>
                        <td>Initial conversion tracking</td>
                    </tr>
                    <tr>
                        <td><code>wallet.activated</code></td>
                        <td>User activates Beincom wallet</td>
                        <td>~30 minutes to several days</td>
                        <td>High-value conversion event</td>
                    </tr>
                    <tr>
                        <td><code>kyc.completed</code></td>
                        <td>User completes KYC verification</td>
                        <td>~1-7 days after signup</td>
                        <td>Full platform access</td>
                    </tr>
                </tbody>
            </table>

            <h3>📊 Event Data Structure</h3>
            <p>Each event contains comprehensive data about the user action:</p>
            <div class="code-block">
{
  "eventId": "evt_7f8a9b2c1d",
  "clientId": "your-client-id",
  "userId": "bic_user_456789",
  "identityId": "user-12345",  // Your internal user ID
  "eventType": "wallet.activated",
  "eventData": {
    "wallet_type": "standard",
    "activation_method": "mobile_app",
    "currency_preferences": ["USD", "BTC"]
  },
  "transactionId": "txn_unique_123",
  "createdAt": "2024-01-15T14:30:00Z",
  "processedAt": "2024-01-15T14:30:05Z",
  "extra": {
    "campaign": "holiday_promotion",
    "source": "web_app",
    "user_tier": "premium"
  }
}
            </div>

            <h3>🔍 Querying Events via API</h3>
            <p>You can query user events programmatically using our REST API:</p>

            <div class="endpoint">
                <span class="endpoint-method">GET</span>
                <code>https://partner.beincom.com/v1/events</code>
                <p>Retrieve events with flexible filtering options</p>
            </div>

            <h4>Query Parameters</h4>
            <table>
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Required</th>
                        <th>Type</th>
                        <th>Description</th>
                        <th>Default</th>
                        <th>Example</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>identityId</code></td>
                        <td>❌ No</td>
                        <td>string</td>
                        <td>Filter by your internal user ID (optional - if not provided, returns all events for client)</td>
                        <td>-</td>
                        <td>user-12345</td>
                    </tr>
                    <tr>
                        <td><code>eventType</code></td>
                        <td>❌ No</td>
                        <td>string</td>
                        <td>Filter by specific event type</td>
                        <td>-</td>
                        <td>wallet.activated</td>
                    </tr>
                    <tr>
                        <td><code>startDate</code></td>
                        <td>❌ No</td>
                        <td>string</td>
                        <td>Filter events after this date (ISO 8601)</td>
                        <td>-</td>
                        <td>2024-01-01T00:00:00Z</td>
                    </tr>
                    <tr>
                        <td><code>endDate</code></td>
                        <td>❌ No</td>
                        <td>string</td>
                        <td>Filter events before this date (ISO 8601)</td>
                        <td>-</td>
                        <td>2024-01-31T23:59:59Z</td>
                    </tr>
                    <tr>
                        <td><code>limit</code></td>
                        <td>❌ No</td>
                        <td>number</td>
                        <td>Number of events per page (min: 1, max: 5000)</td>
                        <td>20</td>
                        <td>100</td>
                    </tr>
                    <tr>
                        <td><code>offset</code></td>
                        <td>❌ No</td>
                        <td>number</td>
                        <td>Pagination offset (min: 0)</td>
                        <td>0</td>
                        <td>50</td>
                    </tr>
                    <tr>
                        <td><code>sort</code></td>
                        <td>❌ No</td>
                        <td>string</td>
                        <td>Sort order: <code>createdAt:asc</code> or <code>createdAt:desc</code></td>
                        <td>createdAt:desc</td>
                        <td>createdAt:asc</td>
                    </tr>
                </tbody>
            </table>

            <h4>Response Structure</h4>
            <p>The API returns a paginated response with metadata:</p>
            <div class="code-header">
                <span class="code-lang-badge">JSON</span>
                Response Format
            </div>
            <div class="code-block"><pre>{
  <span class="code-property">"data"</span>: [
    {
      <span class="code-property">"eventId"</span>: <span class="code-string">"evt_7f8a9b2c1d"</span>,
      <span class="code-property">"clientId"</span>: <span class="code-string">"your-client-id"</span>,
      <span class="code-property">"userId"</span>: <span class="code-string">"bic_user_456789"</span>,
      <span class="code-property">"identityId"</span>: <span class="code-string">"user-12345"</span>,
      <span class="code-property">"eventType"</span>: <span class="code-string">"wallet.activated"</span>,
      <span class="code-property">"eventData"</span>: {...},
      <span class="code-property">"transactionId"</span>: <span class="code-string">"txn_unique_123"</span>,
      <span class="code-property">"webhookStatus"</span>: <span class="code-string">"sent"</span>,
      <span class="code-property">"webhookAttempts"</span>: <span class="code-number">1</span>,
      <span class="code-property">"createdAt"</span>: <span class="code-string">"2024-01-15T14:30:00Z"</span>,
      <span class="code-property">"processedAt"</span>: <span class="code-string">"2024-01-15T14:30:05Z"</span>
    }
  ],
  <span class="code-property">"meta"</span>: {
    <span class="code-property">"total"</span>: <span class="code-number">150</span>,
    <span class="code-property">"offset"</span>: <span class="code-number">0</span>,
    <span class="code-property">"limit"</span>: <span class="code-number">20</span>,
    <span class="code-property">"hasNextPage"</span>: <span class="code-keyword">true</span>,
    <span class="code-property">"hasPreviousPage"</span>: <span class="code-keyword">false</span>
  }
}</pre></div>

            <h4>Example API Queries</h4>

            <div class="code-header">
                <span class="code-lang-badge">BASH</span>
                Get events for a specific user
            </div>
            <div class="code-block"><pre><span class="code-comment"># Get all events for a specific user with pagination</span>
curl -X GET <span class="code-string">"https://partner.beincom.com/v1/events?identityId=user-12345&limit=50&offset=0"</span> \
  -H <span class="code-string">"x-api-key: YOUR_API_KEY"</span> \
  -H <span class="code-string">"x-client-id: YOUR_CLIENT_ID"</span></pre></div>

            <div class="code-header">
                <span class="code-lang-badge">BASH</span>
                Get all events for your client (without identityId)
            </div>
            <div class="code-block"><pre><span class="code-comment"># Get all events for your client (without filtering by identityId)</span>
curl -X GET <span class="code-string">"https://partner.beincom.com/v1/events?limit=50&offset=0"</span> \
  -H <span class="code-string">"x-api-key: YOUR_API_KEY"</span> \
  -H <span class="code-string">"x-client-id: YOUR_CLIENT_ID"</span></pre></div>

            <div class="code-header">
                <span class="code-lang-badge">BASH</span>
                Get events with custom sort order
            </div>
            <div class="code-block"><pre><span class="code-comment"># Get wallet activation events sorted by oldest first</span>
curl -X GET <span class="code-string">"https://partner.beincom.com/v1/events?identityId=user-12345&eventType=wallet.activated&sort=createdAt:asc"</span> \
  -H <span class="code-string">"x-api-key: YOUR_API_KEY"</span> \
  -H <span class="code-string">"x-client-id: YOUR_CLIENT_ID"</span></pre></div>

            <div class="code-header">
                <span class="code-lang-badge">BASH</span>
                Get events with date filter and pagination
            </div>
            <div class="code-block"><pre><span class="code-comment"># Get recent events with date range and pagination</span>
curl -X GET <span class="code-string">"https://partner.beincom.com/v1/events?identityId=user-12345&startDate=2024-01-01T00:00:00Z&limit=50&offset=50"</span> \
  -H <span class="code-string">"x-api-key: YOUR_API_KEY"</span> \
  -H <span class="code-string">"x-client-id: YOUR_CLIENT_ID"</span></pre></div>

            <h3>🎯 Event-Driven Business Logic Examples</h3>
            <div class="code-block">
// Node.js example for processing different event types
async function handleUserEvent(event) {
  const { eventType, identityId, eventData, extra } = event;

  try {
    switch (eventType) {
      case 'user.registered':
        // Update conversion funnel
        await analytics.track('beincom_signup_completed', {
          identityId,
          campaign: extra?.campaign,
          conversionTime: calculateConversionTime(event)
        });

        // Send welcome notification
        await notifications.send(identityId, 'beincom_welcome');
        break;

      case 'wallet.activated':
        // High-value conversion event
        await analytics.track('beincom_wallet_activated', {
          identityId,
          walletType: eventData.wallet_type,
          value: 100 // Assign monetary value to this conversion
        });

        // Unlock premium features
        await userService.upgradeToPremium(identityId);

        // Send congratulations
        await notifications.send(identityId, 'wallet_activation_success');
        break;

      case 'kyc.completed':
        // Full platform access
        await userService.updateFeatureAccess(identityId, {
          kycCompleted: true,
          accessLevel: 'full'
        });

        // Trigger reward or bonus
        await rewards.grant(identityId, 'kyc_completion_bonus');
        break;
    }

    // Update user journey stage
    await userJourney.updateStage(identityId, eventType);

  } catch (error) {
    console.error(`Error processing ${eventType} for ${identityId}:`, error);
    // Implement retry logic or error handling
  }
}
            </div>
        </section>

        <section id="webhooks">
            <h2>🔔 Webhook Integration</h2>

            <p>Webhooks provide real-time notifications when users complete actions in Beincom. This is the recommended method for staying synchronized with user progress.</p>

            <h3>⚙️ Webhook Configuration</h3>
            <p>During your partner setup, our team will configure your webhook endpoint with these settings:</p>

            <div class="step">
                <h4>Endpoint Configuration</h4>
                <ul>
                    <li><strong>URL:</strong> Your HTTPS endpoint (e.g., https://api.yoursite.com/webhooks/beincom)</li>
                    <li><strong>Authentication:</strong> API key authentication</li>
                    <li><strong>Timeout:</strong> 30 seconds (configurable)</li>
                    <li><strong>Retry Policy:</strong> 3 attempts with exponential backoff</li>
                    <li><strong>Event Filtering:</strong> Only subscribed event types</li>
                </ul>
                <div class="info">
                    <strong>Note:</strong> HMAC signature authentication is not currently supported. API key authentication is used for securing webhooks.
                </div>
            </div>

            <h3>📨 Webhook Payload Structure</h3>
            <div class="code-block">
{
  "eventId": "evt_7f8a9b2c1d",
  "clientId": "your-client-id",
  "userId": "bic_user_456789",
  "identityId": "user-12345",
  "eventType": "wallet.activated",
  "eventData": {
    "wallet_type": "standard",
    "activation_method": "mobile_app"
  },
  "transactionId": "txn_unique_123",
  "createdAt": "2024-01-15T14:30:00Z",
  "extra": {
    "campaign": "holiday_promotion",
    "source": "web_app"
  }
}
            </div>

            <h3>🔐 Webhook Security</h3>
            <p>Webhooks include security measures to ensure authenticity:</p>

            <div class="info">
                <strong>Note:</strong> HMAC signature verification is not currently supported. Please use API key authentication to secure your webhook endpoints. Verify the API key from the request headers to ensure requests are coming from Beincom.
            </div>

            <div class="step">
                <h4>API Key Verification</h4>
                <p>Verify the API key in your webhook endpoint to ensure authenticity:</p>
                <div class="code-block">
// Express.js webhook handler with API key verification
app.post('/webhooks/beincom', express.json(), (req, res) => {
  const apiKey = req.headers['x-api-key'] || req.headers['authorization']?.replace('Bearer ', '');

  // Verify the API key matches your configured webhook secret
  if (apiKey !== process.env.BEINCOM_WEBHOOK_SECRET) {
    return res.status(401).json({ error: 'Invalid API key' });
  }

  // Process the webhook
  const event = req.body;
  processWebhookEvent(event);

  res.status(200).json({ status: 'success' });
});
                </div>
            </div>

            <h3>📝 Webhook Implementation Examples</h3>

            <div class="step">
                <h4>Express.js Implementation</h4>
                <div class="code-block">
const express = require('express');
const app = express();

// Middleware for parsing JSON
app.use('/webhooks/beincom', express.json());

// Webhook endpoint
app.post('/webhooks/beincom', async (req, res) => {
  try {
    const event = req.body;

    // Log incoming webhook
    console.log('Received Beincom webhook:', {
      eventType: event.eventType,
      identityId: event.identityId,
      timestamp: event.createdAt
    });

    // Process the event
    await processUserEvent(event);

    // Respond with success
    res.status(200).json({
      status: 'success',
      eventId: event.eventId
    });

  } catch (error) {
    console.error('Webhook processing error:', error);

    // Return error status to trigger retry
    res.status(500).json({
      status: 'error',
      message: error.message
    });
  }
});

async function processUserEvent(event) {
  const { eventType, identityId, eventData, extra } = event;

  // Update your database
  await db.userEvents.create({
    identityId: identityId,
    eventType: eventType,
    beincomUserId: event.userId,
    eventData: eventData,
    extra: extra,
    receivedAt: new Date()
  });

  // Trigger business logic
  await handleUserEvent(event);

  // Update analytics
  await updateConversionMetrics(eventType, extra?.campaign);
}
                </div>
            </div>

            <div class="step">
                <h4>Python Flask Implementation</h4>
                <div class="code-block">
from flask import Flask, request, jsonify
import json
import logging
import os

app = Flask(__name__)

@app.route('/webhooks/beincom', methods=['POST'])
def handle_beincom_webhook():
    try:
        # Get the API key from headers
        api_key = request.headers.get('X-API-Key') or \
                  request.headers.get('Authorization', '').replace('Bearer ', '')

        # Verify API key
        if api_key != os.getenv('BEINCOM_WEBHOOK_SECRET'):
            return jsonify({'error': 'Invalid API key'}), 401

        # Parse the event
        event = request.get_json()

        # Log the event
        logging.info(f"Received {event['eventType']} for user {event['identityId']}")

        # Process the event
        process_user_event(event)

        return jsonify({'status': 'success', 'eventId': event['eventId']})

    except Exception as e:
        logging.error(f"Webhook error: {str(e)}")
        return jsonify({'status': 'error', 'message': str(e)}), 500

def process_user_event(event):
    # Your business logic here
    event_type = event['eventType']
    identity_id = event['identityId']

    if event_type == 'wallet.activated':
        # Unlock premium features
        unlock_premium_features(identity_id)
        send_congratulations_email(identity_id)
    elif event_type == 'user.registered':
        # Track conversion
        track_conversion(identity_id, event.get('extra', {}))

    # Update user record
    update_user_progress(identity_id, event_type)
                </div>
            </div>

            <div class="troubleshooting">
                <h4>🔧 Webhook Troubleshooting</h4>
                <ul>
                    <li><strong>Timeouts:</strong> Ensure your endpoint responds within 30 seconds</li>
                    <li><strong>Duplicates:</strong> Handle duplicate events gracefully using eventId</li>
                    <li><strong>Retries:</strong> Failed webhooks are retried 3 times with exponential backoff</li>
                    <li><strong>Monitoring:</strong> Log all webhook requests for debugging and monitoring</li>
                </ul>
            </div>
        </section>

        <section id="api-access">
            <h2>🔌 API Access</h2>

            <p>Our REST API provides programmatic access to user events and data. Use it for building analytics dashboards, generating reports, or syncing data with your systems.</p>

            <div class="info">
                <strong>Base URL:</strong> <code>https://partner.beincom.com/v1</code><br>
                <strong>Authentication:</strong> Required headers: <code>x-api-key</code> and <code>x-client-id</code>
            </div>

            <h3>🔐 Authentication</h3>
            <p>All API requests require two authentication headers:</p>
            <div class="code-block">
x-api-key: YOUR_API_KEY_HERE
x-client-id: YOUR_CLIENT_ID_HERE
            </div>

            <h3>📊 Available Endpoints</h3>

            <div class="endpoint">
                <span class="endpoint-method">GET</span>
                <code>/events</code>
                <p>Query user events with flexible filtering options</p>
            </div>

            <div class="endpoint">
                <span class="endpoint-method">GET</span>
                <code>/events/{eventId}</code>
                <p>Get details for a specific event by ID</p>
            </div>

            <div class="endpoint">
                <span class="endpoint-method">GET</span>
                <code>/members</code>
                <p>Retrieve all members (user registrations) for your partnership with pagination</p>
            </div>

            <h4>Members Query Parameters</h4>
            <table>
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Required</th>
                        <th>Type</th>
                        <th>Description</th>
                        <th>Default</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>userId</code></td>
                        <td>❌ No</td>
                        <td>string</td>
                        <td>Filter by specific user ID</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td><code>identityId</code></td>
                        <td>❌ No</td>
                        <td>string</td>
                        <td>Filter by your internal identity ID</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td><code>limit</code></td>
                        <td>❌ No</td>
                        <td>number</td>
                        <td>Number of members per page (min: 1, max: 5000)</td>
                        <td>20</td>
                    </tr>
                    <tr>
                        <td><code>offset</code></td>
                        <td>❌ No</td>
                        <td>number</td>
                        <td>Pagination offset (min: 0)</td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td><code>sort</code></td>
                        <td>❌ No</td>
                        <td>string</td>
                        <td>Sort order: <code>createdAt:asc</code> or <code>createdAt:desc</code></td>
                        <td>createdAt:desc</td>
                    </tr>
                </tbody>
            </table>

            <h4>Members Response Example</h4>
            <div class="code-header">
                <span class="code-lang-badge">JSON</span>
                Response Format
            </div>
            <div class="code-block"><pre>{
  <span class="code-property">"data"</span>: [
    {
      <span class="code-property">"userId"</span>: <span class="code-string">"bic_user_789"</span>,
      <span class="code-property">"clientId"</span>: <span class="code-string">"your-client-id"</span>,
      <span class="code-property">"identityId"</span>: <span class="code-string">"user-12345"</span>,
      <span class="code-property">"extra"</span>: <span class="code-string">"{\"campaign\":\"summer2024\"}"</span>,
      <span class="code-property">"registeredAt"</span>: <span class="code-string">"2024-01-15T10:00:00Z"</span>
    }
  ],
  <span class="code-property">"meta"</span>: {
    <span class="code-property">"total"</span>: <span class="code-number">1250</span>,
    <span class="code-property">"offset"</span>: <span class="code-number">0</span>,
    <span class="code-property">"limit"</span>: <span class="code-number">20</span>,
    <span class="code-property">"hasNextPage"</span>: <span class="code-keyword">true</span>,
    <span class="code-property">"hasPreviousPage"</span>: <span class="code-keyword">false</span>
  }
}</pre></div>

            <h4>Members API Examples</h4>

            <div class="code-header">
                <span class="code-lang-badge">BASH</span>
                Get all members with pagination
            </div>
            <div class="code-block"><pre><span class="code-comment"># Fetch 100 members starting from the beginning</span>
curl -X GET <span class="code-string">"https://partner.beincom.com/v1/members?limit=100&offset=0"</span> \
  -H <span class="code-string">"x-api-key: YOUR_API_KEY"</span> \
  -H <span class="code-string">"x-client-id: YOUR_CLIENT_ID"</span></pre></div>

            <div class="code-header">
                <span class="code-lang-badge">BASH</span>
                Get specific member by identityId
            </div>
            <div class="code-block"><pre><span class="code-comment"># Find a specific member by your internal ID</span>
curl -X GET <span class="code-string">"https://partner.beincom.com/v1/members?identityId=user-12345"</span> \
  -H <span class="code-string">"x-api-key: YOUR_API_KEY"</span> \
  -H <span class="code-string">"x-client-id: YOUR_CLIENT_ID"</span></pre></div>

            <h3>💡 Common Use Cases</h3>

            <div class="step">
                <h4>Daily Analytics Sync</h4>
                <div class="code-block">
// Sync yesterday's events to your analytics system
async function syncDailyEvents() {
  const yesterday = new Date();
  yesterday.setDate(yesterday.getDate() - 1);
  yesterday.setHours(0, 0, 0, 0);

  const today = new Date();
  today.setHours(0, 0, 0, 0);

  const events = await beincomAPI.getEvents({
    startDate: yesterday.toISOString(),
    endDate: today.toISOString(),
    limit: 1000
  });

  for (const event of events) {
    await analytics.recordEvent({
      userId: event.identityId,
      eventType: event.eventType,
      timestamp: event.createdAt,
      properties: {
        beincomUserId: event.userId,
        campaign: event.extra?.campaign
      }
    });
  }
}

// Run daily at 1 AM
cron.schedule('0 1 * * *', syncDailyEvents);
                </div>
            </div>

            <div class="step">
                <h4>User Progress Dashboard</h4>
                <div class="code-block">
// Get user progress for dashboard
async function getUserProgress(identityId) {
  const events = await beincomAPI.getEvents({
    identityId: identityId
  });

  const progress = {
    registered: false,
    walletActivated: false,
    kycCompleted: false,
    lastActivity: null
  };

  events.forEach(event => {
    switch (event.eventType) {
      case 'user.registered':
        progress.registered = true;
        break;
      case 'wallet.activated':
        progress.walletActivated = true;
        break;
      case 'kyc.completed':
        progress.kycCompleted = true;
        break;
    }

    if (!progress.lastActivity || event.createdAt > progress.lastActivity) {
      progress.lastActivity = event.createdAt;
    }
  });

  return progress;
}
                </div>
            </div>

            <div class="step">
                <h4>Campaign Performance Analysis</h4>
                <div class="code-block">
// Analyze campaign performance
async function analyzeCampaignPerformance(campaignId, days = 30) {
  const startDate = new Date();
  startDate.setDate(startDate.getDate() - days);

  const events = await beincomAPI.getEvents({
    startDate: startDate.toISOString(),
    limit: 5000
  });

  // Filter events for this campaign
  const campaignEvents = events.filter(event =>
    event.extra?.campaign === campaignId
  );

  // Calculate funnel metrics
  const metrics = {
    totalReferrals: new Set(campaignEvents.map(e => e.identityId)).size,
    registrations: campaignEvents.filter(e => e.eventType === 'user.registered').length,
    walletActivations: campaignEvents.filter(e => e.eventType === 'wallet.activated').length,
    kycCompletions: campaignEvents.filter(e => e.eventType === 'kyc.completed').length
  };

  // Calculate conversion rates
  metrics.registrationRate = metrics.registrations / metrics.totalReferrals;
  metrics.walletActivationRate = metrics.walletActivations / metrics.registrations;

  return metrics;
}
                </div>
            </div>
        </section>

        <section id="testing">
            <h2>🧪 Testing Your Integration</h2>

            <p>Thorough testing ensures your integration works correctly and provides a smooth user experience. Here's a comprehensive testing guide:</p>

            <div class="checklist">
                <h4>✅ Integration Testing Checklist</h4>
                <ul>
                    <li>Referral URL generation and parameter encoding</li>
                    <li>User flow from your platform to Beincom signup</li>
                    <li>Webhook endpoint receiving and processing events</li>
                    <li>API authentication and data retrieval</li>
                    <li>Error handling and retry mechanisms</li>
                    <li>Performance under expected load</li>
                    <li>Security measures (API key authentication, input validation)</li>
                </ul>
            </div>

            <h3>🔬 Testing Strategy</h3>

            <div class="step">
                <div class="step-number">1</div>
                <h4>Unit Testing</h4>
                <div class="code-block">
// Example unit tests for referral URL generation
describe('Beincom Integration', () => {
  test('generates correct referral URL', () => {
    const url = generateBeincomReferralUrl('user-123', {
      campaign: 'test'
    });

    expect(url).toContain('clientId=your-client-id');
    expect(url).toContain('identityId=user-123');
    expect(url).toContain('extra=');
  });

  test('handles special characters in extra data', () => {
    const url = generateBeincomReferralUrl('user-123', {
      campaign: 'test with spaces & symbols'
    });

    expect(decodeURIComponent(url)).toContain('test with spaces & symbols');
  });
});

// Example webhook processing tests
describe('Webhook Processing', () => {
  test('processes user registration event', async () => {
    const mockEvent = {
      eventType: 'user.registered',
      identityId: 'test-user-123',
      eventData: { email: 'test@example.com' }
    };

    await processUserEvent(mockEvent);

    const user = await getUserByIdentityId('test-user-123');
    expect(user.beincomRegistered).toBe(true);
  });
});
                </div>
            </div>

            <div class="step">
                <div class="step-number">2</div>
                <h4>Integration Testing</h4>
                <p>Test the complete user flow with actual Beincom integration:</p>
                <ol>
                    <li>Generate referral URL with test user data</li>
                    <li>Navigate to Beincom signup (use test/sandbox environment)</li>
                    <li>Complete signup process with test user</li>
                    <li>Verify webhook notifications are received</li>
                    <li>Query API to confirm event data matches expectations</li>
                    <li>Validate business logic triggers correctly</li>
                </ol>
            </div>

            <div class="step">
                <div class="step-number">3</div>
                <h4>Load Testing</h4>
                <div class="code-block">
// Example load test for webhook endpoint
const loadTest = require('loadtest');

const options = {
  url: 'https://your-api.com/webhooks/beincom',
  method: 'POST',
  body: JSON.stringify({
    eventType: 'user.registered',
    identityId: 'load-test-user',
    clientId: 'your-client-id'
  }),
  headers: {
    'Content-Type': 'application/json'
  },
  maxRequests: 1000,
  concurrency: 10
};

loadTest.loadTest(options, (error, results) => {
  if (error) {
    console.error('Load test failed:', error);
  } else {
    console.log('Load test results:', results);
  }
});
                </div>
            </div>

            <div class="troubleshooting">
                <h4>🔧 Common Testing Issues</h4>
                <ul>
                    <li><strong>URL Encoding:</strong> Ensure special characters in extra data are properly encoded</li>
                    <li><strong>HTTPS Required:</strong> Webhook endpoints must use HTTPS in production</li>
                    <li><strong>Response Timeouts:</strong> Webhook handlers should respond within 30 seconds</li>
                    <li><strong>Duplicate Events:</strong> Test idempotency by processing the same event multiple times</li>
                    <li><strong>Rate Limiting:</strong> Test API calls respect rate limits and handle 429 responses</li>
                </ul>
            </div>

            <h3>🎯 Testing Tools & Resources</h3>
            <div class="info">
                <ul>
                    <li><strong>Webhook Testing:</strong> Use tools like ngrok for local webhook testing</li>
                    <li><strong>API Testing:</strong> Postman collection available upon request</li>
                    <li><strong>Monitoring:</strong> Set up alerts for webhook failures and API errors</li>
                    <li><strong>Logging:</strong> Implement comprehensive logging for debugging</li>
                </ul>
            </div>
        </section>

        <section id="examples">
            <h2>💡 Complete Integration Examples</h2>

            <p>Here are comprehensive examples showing different integration approaches and use cases:</p>

            <div class="step">
                <h3>📱 E-commerce Platform Integration</h3>
                <p>Example for an e-commerce platform wanting to refer customers to Beincom for crypto payments:</p>
                <div class="code-block">
// E-commerce integration example
class BeincomEcommerceIntegration {
  constructor(clientId, apiKey) {
    this.clientId = clientId;
    this.apiKey = apiKey;
    this.baseUrl = 'https://partner.beincom.com/v1';
  }

  // Generate referral link for checkout page
  generateCheckoutReferralLink(customerId, orderData) {
    const extraData = {
      source: 'checkout_page',
      order_value: orderData.total,
      order_id: orderData.id,
      customer_tier: orderData.customerTier,
      payment_intent: 'crypto_payment'
    };

    return `https://group.beincom.com/ref/Cb8pun?type=personal&clientId=${this.clientId}&identityId=${customerId}&extra=${encodeURIComponent(JSON.stringify(extraData))}`;
  }

  // Handle webhook for user wallet activation
  async handleWalletActivation(event) {
    const { identityId, eventData } = event;

    try {
      // Enable crypto payment option for this customer
      await this.enableCryptoPayments(identityId);

      // Send notification about new payment method
      await this.sendPaymentMethodNotification(identityId);

      // Update customer analytics
      await this.updateCustomerAnalytics(identityId, 'crypto_enabled');

      // Offer crypto payment discount
      await this.createCryptoPaymentDiscount(identityId);

    } catch (error) {
      console.error('Error handling wallet activation:', error);
    }
  }

  // Check customer Beincom status
  async getCustomerBeincomStatus(customerId) {
    const events = await this.queryEvents({ identityId: customerId });

    const status = {
      hasAccount: false,
      walletActive: false,
      kycCompleted: false,
      eligibleForCryptoPayment: false
    };

    events.forEach(event => {
      switch (event.eventType) {
        case 'user.registered':
          status.hasAccount = true;
          break;
        case 'wallet.activated':
          status.walletActive = true;
          break;
        case 'kyc.completed':
          status.kycCompleted = true;
          break;
      }
    });

    status.eligibleForCryptoPayment = status.hasAccount && status.walletActive;
    return status;
  }
}

// Usage in checkout process
const beincomIntegration = new BeincomEcommerceIntegration(
  process.env.BEINCOM_CLIENT_ID,
  process.env.BEINCOM_API_KEY
);

app.post('/checkout/enable-crypto', async (req, res) => {
  const { customerId, orderData } = req.body;

  // Check if customer already has Beincom wallet
  const status = await beincomIntegration.getCustomerBeincomStatus(customerId);

  if (status.eligibleForCryptoPayment) {
    // Customer already has wallet, enable crypto payment immediately
    res.json({
      cryptoEnabled: true,
      message: 'Crypto payment enabled'
    });
  } else {
    // Generate referral link for Beincom signup
    const referralLink = beincomIntegration.generateCheckoutReferralLink(
      customerId,
      orderData
    );

    res.json({
      cryptoEnabled: false,
      referralLink: referralLink,
      message: 'Complete Beincom setup to enable crypto payments'
    });
  }
});
                </div>
            </div>

            <div class="step">
                <h3>🎮 Gaming Platform Integration</h3>
                <p>Example for a gaming platform wanting to integrate Beincom for in-game purchases and rewards:</p>
                <div class="code-block">
// Gaming platform integration
class BeincomGamingIntegration {
  constructor(clientId, apiKey) {
    this.clientId = clientId;
    this.apiKey = apiKey;
  }

  // Refer player during onboarding
  async referPlayerDuringOnboarding(playerId, gameData) {
    const extraData = {
      source: 'game_onboarding',
      game_level: gameData.level,
      player_type: gameData.playerType,
      referral_context: 'unlock_premium_features'
    };

    const referralUrl = `https://group.beincom.com/ref/Cb8pun?type=personal&clientId=${this.clientId}&identityId=${playerId}&extra=${encodeURIComponent(JSON.stringify(extraData))}`;

    // Track the referral in game analytics
    await this.gameAnalytics.track('beincom_referral_shown', {
      playerId: playerId,
      context: 'onboarding'
    });

    return referralUrl;
  }

  // Handle player wallet activation
  async handlePlayerWalletActivation(event) {
    const { identityId: playerId, eventData } = event;

    try {
      // Unlock premium features
      await this.unlockPremiumFeatures(playerId);

      // Grant welcome bonus
      await this.grantWelcomeBonus(playerId, {
        type: 'crypto_wallet_bonus',
        amount: 1000,
        currency: 'game_coins'
      });

      // Enable NFT marketplace access
      await this.enableNFTMarketplace(playerId);

      // Send in-game notification
      await this.sendInGameNotification(playerId, {
        title: 'Crypto Wallet Activated!',
        message: 'You can now trade NFTs and earn crypto rewards',
        type: 'achievement'
      });

    } catch (error) {
      console.error('Error handling player wallet activation:', error);
    }
  }

  // Get player crypto readiness score
  async getPlayerCryptoReadiness(playerId) {
    const events = await this.queryEvents({ identityId: playerId });

    let score = 0;
    const milestones = {
      registered: false,
      walletActivated: false,
      kycCompleted: false
    };

    events.forEach(event => {
      switch (event.eventType) {
        case 'user.registered':
          milestones.registered = true;
          score += 30;
          break;
        case 'wallet.activated':
          milestones.walletActivated = true;
          score += 50;
          break;
        case 'kyc.completed':
          milestones.kycCompleted = true;
          score += 20;
          break;
      }
    });

    return { score, milestones };
  }
}

// In-game integration points
app.get('/game/player/:playerId/crypto-features', async (req, res) => {
  const { playerId } = req.params;

  const readiness = await gamingIntegration.getPlayerCryptoReadiness(playerId);

  res.json({
    cryptoScore: readiness.score,
    availableFeatures: {
      nftTrading: readiness.milestones.walletActivated,
      cryptoRewards: readiness.milestones.walletActivated,
      premiumMarketplace: readiness.milestones.kycCompleted
    },
    nextMilestone: getNextMilestone(readiness.milestones)
  });
});
                </div>
            </div>

            <div class="step">
                <h3>📈 SaaS Platform Integration</h3>
                <p>Example for a SaaS platform offering crypto payment options:</p>
                <div class="code-block">
// SaaS platform integration
class BeincomSaaSIntegration {
  constructor(clientId, apiKey) {
    this.clientId = clientId;
    this.apiKey = apiKey;
  }

  // Integrate with subscription upgrade flow
  async handleSubscriptionUpgrade(userId, planData) {
    const extraData = {
      source: 'subscription_upgrade',
      target_plan: planData.name,
      plan_value: planData.price,
      upgrade_context: 'crypto_payment_discount'
    };

    // Check if user already has Beincom wallet
    const events = await this.queryEvents({ identityId: userId });
    const hasWallet = events.some(e => e.eventType === 'wallet.activated');

    if (hasWallet) {
      // Offer immediate crypto payment discount
      return {
        cryptoPaymentAvailable: true,
        discount: 0.15, // 15% discount for crypto payments
        message: 'Pay with crypto and save 15%!'
      };
    } else {
      // Generate referral link with subscription context
      const referralUrl = `https://group.beincom.com/ref/Cb8pun?type=personal&clientId=${this.clientId}&identityId=${userId}&extra=${encodeURIComponent(JSON.stringify(extraData))}`;

      return {
        cryptoPaymentAvailable: false,
        referralUrl: referralUrl,
        potentialDiscount: 0.15,
        message: 'Set up Beincom wallet to unlock 15% crypto payment discount'
      };
    }
  }

  // Handle user KYC completion for enterprise features
  async handleKYCCompletion(event) {
    const { identityId: userId } = event;

    try {
      // Enable enterprise crypto features
      await this.enableEnterpriseFeatures(userId, [
        'bulk_crypto_payments',
        'advanced_analytics',
        'dedicated_support'
      ]);

      // Create enterprise welcome campaign
      await this.createWelcomeCampaign(userId, {
        type: 'enterprise_crypto_user',
        benefits: [
          'Priority customer support',
          'Advanced payment analytics',
          'Bulk payment processing'
        ]
      });

      // Schedule follow-up for adoption
      await this.scheduleFollowUp(userId, '7_day_crypto_adoption');

    } catch (error) {
      console.error('Error handling KYC completion:', error);
    }
  }

  // Analytics dashboard integration
  async getCryptoUserMetrics(timeRange = '30d') {
    const startDate = new Date();
    startDate.setDate(startDate.getDate() - parseInt(timeRange));

    const events = await this.queryEvents({
      startDate: startDate.toISOString(),
      limit: 5000
    });

    const metrics = {
      totalReferrals: new Set(events.map(e => e.identityId)).size,
      conversionFunnel: {
        registered: 0,
        walletActivated: 0,
        kycCompleted: 0
      },
      cryptoPaymentAdoption: 0,
      revenueImpact: 0
    };

    // Calculate funnel metrics
    events.forEach(event => {
      switch (event.eventType) {
        case 'user.registered':
          metrics.conversionFunnel.registered++;
          break;
        case 'wallet.activated':
          metrics.conversionFunnel.walletActivated++;
          break;
        case 'kyc.completed':
          metrics.conversionFunnel.kycCompleted++;
          break;
      }
    });

    // Calculate adoption rate
    metrics.cryptoPaymentAdoption = metrics.conversionFunnel.walletActivated / metrics.totalReferrals;

    return metrics;
  }
}
                </div>
            </div>
        </section>

        <section id="support">
            <h2>📞 Support & Resources</h2>

            <div class="contact-info">
                <h3>🤝 Partner Support</h3>
                <p>Our dedicated partner success team is here to help you succeed</p>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 30px 0;">
                <div class="benefit-card">
                    <h4>📧 Technical Support</h4>
                    <p><strong>Email:</strong> tech-support@beincom.com</p>
                    <p><strong>Response Time:</strong> 4-8 hours during business days</p>
                    <p>For integration issues, API problems, and technical questions</p>
                </div>

                <div class="benefit-card">
                    <h4>🤝 Partnership Team</h4>
                    <p><strong>Email:</strong> partnerships@beincom.com</p>
                    <p><strong>Response Time:</strong> 24-48 hours</p>
                    <p>For business discussions, contract questions, and strategic planning</p>
                </div>

                <div class="benefit-card">
                    <h4>🆘 Emergency Support</h4>
                    <p><strong>For Production Issues:</strong> urgent@beincom.com</p>
                    <p><strong>Response Time:</strong> 1-2 hours</p>
                    <p>Use only for critical production issues affecting user experience</p>
                </div>
            </div>

            <h3>📚 Additional Resources</h3>
            <div class="checklist">
                <h4>🔗 Helpful Links</h4>
                <ul>
                    <li>API Documentation: /docs (Swagger UI)</li>
                    <li>Integration Examples: Available in this guide</li>
                    <li>Service Status: status.beincom.com</li>
                    <li>Partner Portal: partners.beincom.com (coming soon)</li>
                    <li>Community Forum: community.beincom.com</li>
                </ul>
            </div>

            <div class="troubleshooting">
                <h4>🔧 Quick Troubleshooting</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div>
                        <h5>Common Issues:</h5>
                        <ul>
                            <li><strong>Webhooks not received:</strong> Check HTTPS, response times, and firewall settings</li>
                            <li><strong>API 401 errors:</strong> Verify both x-api-key and x-client-id headers</li>
                            <li><strong>No events for user:</strong> Confirm clientId in referral URL matches your configuration</li>
                        </ul>
                    </div>
                    <div>
                        <h5>Debug Steps:</h5>
                        <ul>
                            <li>Check service status at status.beincom.com</li>
                            <li>Review API logs for error details</li>
                            <li>Test with curl commands from documentation</li>
                            <li>Verify webhook endpoint with test payloads</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="success">
                <h4>🎯 Best Practices for Success</h4>
                <ul>
                    <li><strong>Monitor Integration Health:</strong> Set up alerts for webhook failures and API errors</li>
                    <li><strong>Track User Journey:</strong> Analyze conversion funnels to optimize referral flows</li>
                    <li><strong>Test Regularly:</strong> Periodic testing ensures continued functionality</li>
                    <li><strong>Keep Documentation Updated:</strong> Stay informed about API changes and new features</li>
                    <li><strong>Engage with Community:</strong> Share experiences and learn from other partners</li>
                </ul>
            </div>
        </section>

        <footer style="margin-top: 50px; padding-top: 20px; border-top: 1px solid #e2e8f0; text-align: center; color: #718096;">
            <p>&copy; 2025 Beincom. All rights reserved. | Partner Integration Guide v2.0</p>
            <p>Last updated: <span id="lastUpdated"></span></p>
            <script>
                document.getElementById('lastUpdated').textContent = new Date().toLocaleDateString();
            </script>
        </footer>
    </div>
</body>
</html>